# AetherMind Bot - Render 部署包

> **由 AetherMind Technologies LLC 开发**

## 📦 包内容

此 ZIP 包包含在 Render 平台一键部署 AetherMind Telegram Bot 所需的所有文件。

### 核心文件
- ✅ `render.yaml` - Render 平台配置
- ✅ `package.json` - Node.js 依赖和脚本
- ✅ `tsconfig.json` - TypeScript 配置
- ✅ `src/` - 应用程序源代码
- ✅ `shared/` - 共享类型定义
- ✅ `scripts/` - 构建脚本

### 文档文件
- 📖 `RENDER_DEPLOYMENT_GUIDE.md` - **详细部署指南（必读）**
- 📋 `RENDER_DEPLOYMENT_CHECKLIST.md` - 部署检查清单
- 📄 `RENDER_PACKAGE_MANIFEST.md` - 包清单说明
- 📄 `README.md` - 项目说明
- 🔐 `.env.render.example` - 环境变量模板

## 🚀 快速开始

### 步骤 1: 解压文件
将此 ZIP 包解压到您的项目目录。

### 步骤 2: 推送到 GitHub
```bash
cd your-project-directory
git init
git add .
git commit -m "Initial commit for Render deployment"
git remote add origin <your-github-repo-url>
git push -u origin main
```

### 步骤 3: 准备 Telegram Bot
1. 在 Telegram 找到 [@BotFather](https://t.me/BotFather)
2. 发送 `/newbot` 创建新机器人
3. 保存返回的 **Bot Token**
4. 在 Telegram 找到 [@userinfobot](https://t.me/userinfobot) 获取您的用户 ID

### 步骤 4: 部署到 Render

#### 方式 A: 一键部署（推荐）
1. 访问 [Render Dashboard](https://dashboard.render.com)
2. 点击 "New +" → "Blueprint"
3. 连接您的 GitHub 仓库
4. Render 会自动检测 `render.yaml` 并配置服务
5. 填写环境变量：
   - `TELEGRAM_BOT_TOKEN`: 您的 Bot Token
   - `TELEGRAM_BOT_ADMIN_USERS`: 您的用户 ID
6. 点击 "Apply" 开始部署

#### 方式 B: 手动部署
参考 `RENDER_DEPLOYMENT_GUIDE.md` 中的详细步骤。

### 步骤 5: 验证部署
```bash
# 测试健康检查
curl https://your-app-name.onrender.com/health

# 在 Telegram 测试机器人
# 找到您的机器人并发送 /start
```

## 📚 重要文档

### 必读文档
1. **RENDER_DEPLOYMENT_GUIDE.md** 
   - 完整的部署流程说明
   - 环境变量配置详解
   - 故障排查指南
   - 成本估算

2. **RENDER_DEPLOYMENT_CHECKLIST.md**
   - 部署前检查清单
   - 配置验证步骤
   - 安全检查项目

### 参考文档
- `README.md` - 项目功能和架构说明
- `RENDER_PACKAGE_MANIFEST.md` - 包内容清单
- `.env.render.example` - 环境变量参考

## ⚙️ 环境变量配置

### 必需变量
| 变量 | 说明 | 获取方式 |
|------|------|----------|
| `TELEGRAM_BOT_TOKEN` | Telegram 机器人令牌 | @BotFather |
| `TELEGRAM_BOT_ADMIN_USERS` | 管理员用户 ID | @userinfobot |

### 自动配置变量
这些变量由 Render 自动设置，无需手动配置：
- `DATABASE_URL` - PostgreSQL 连接
- `REDIS_URL` - Redis 连接
- `API_KEY` - API 认证密钥

详细配置说明请参考 `RENDER_DEPLOYMENT_GUIDE.md`。

## 🔒 安全注意事项

⚠️ **重要提醒**：
- ✅ 永远不要提交包含实际密钥的 `.env` 文件到 Git
- ✅ 使用 Render 的环境变量管理来存储敏感信息
- ✅ 定期轮换 API 密钥和令牌
- ✅ 在生产环境启用 IP 白名单

## 💰 成本预估

### 基础配置（推荐起步）
- Web Service (Starter): $7/月
- PostgreSQL (Starter): $7/月  
- Redis (Starter): $13/月
- **总计: $27/月**

### 免费试用
- Web Service 和 PostgreSQL 有免费计划
- Redis 最低 $13/月（无免费版本）

详细成本信息请参考 `RENDER_DEPLOYMENT_GUIDE.md`。

## 🆘 故障排查

### 机器人不响应
1. 验证 Bot Token 是否正确
2. 检查 `TELEGRAM_BOT_ENABLED=true`
3. 查看 Render 日志中的错误

### 数据库连接失败
1. 确认 PostgreSQL 服务状态为 "Available"
2. 检查 `DATABASE_URL` 是否正确链接
3. 确保 Web Service 和数据库在同一区域

### 应用无法启动
1. 查看构建日志
2. 确认 Node.js 版本 >= 20.9.0
3. 检查启动命令: `npm start`

更多故障排查信息请参考 `RENDER_DEPLOYMENT_GUIDE.md`。

## 📞 获取帮助

### 文档资源
- **本地文档**: 查看包内的 Markdown 文件
- **Render 文档**: https://render.com/docs
- **Mastra 文档**: https://mastra.ai/docs

### 支持渠道
- **GitHub Issues**: 在项目仓库提交问题
- **Render Support**: https://render.com/support
- **Email**: support@aethermind.com

## ✅ 部署检查清单

使用此清单确保部署成功：

- [ ] 已解压 ZIP 包
- [ ] 代码已推送到 GitHub
- [ ] 已获取 Telegram Bot Token
- [ ] 已获取 Telegram 用户 ID
- [ ] 已在 Render 创建服务
- [ ] 已配置所有必需的环境变量
- [ ] 部署成功，服务状态为 "Live"
- [ ] 健康检查通过
- [ ] Telegram 机器人响应正常
- [ ] 管理员命令可用

详细检查清单请参考 `RENDER_DEPLOYMENT_CHECKLIST.md`。

## 🎯 下一步

部署成功后：

1. **自定义机器人**
   - 编辑 `src/triggers/telegramTriggers.ts` 添加命令
   - 在 `src/mastra/agents/` 创建新 AI 代理
   - 在 `src/mastra/tools/` 添加自定义工具

2. **监控和优化**
   - 查看 Render 日志
   - 设置性能监控
   - 优化数据库查询

3. **扩展功能**
   - 集成更多 AI 提供商
   - 添加 Slack 集成
   - 实现自定义工作流

## 📄 许可证

MIT License - 详见 LICENSE 文件

## 🙏 致谢

本项目使用以下技术构建：
- [Mastra Framework](https://mastra.ai)
- [Telegram Bot API](https://core.telegram.org/bots)
- [Inngest](https://www.inngest.com)
- [Render](https://render.com)

---

**© 2025 AetherMind Technologies LLC. All rights reserved.**

📧 support@aethermind.com | 🌐 www.aethermind.com

**祝您部署顺利！🚀**
